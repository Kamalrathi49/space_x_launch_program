(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},47:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(16),s=n.n(r),i=(n(29),n(8)),o=n(9),l=n(11),u=n(10),h=n(1),d=function(){return Object(h.jsx)("h1",{children:"SpacEx Launch programs"})},f=(n(31),function(){return Object(h.jsx)("header",{className:"app-header",children:Object(h.jsx)(d,{})})}),p=function(){return Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Developed by: "}),"Kamal Rathi"]})},m=(n(32),function(){return Object(h.jsx)("footer",{className:"app-footer",children:Object(h.jsx)(p,{})})}),j=(n(33),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{}),Object(h.jsx)("main",{className:"main-container",children:this.props.children}),Object(h.jsx)(m,{})]})}}]),n}(c.a.Component)),b=n(12),v=(n(34),c.a.memo((function(e){return Object(h.jsx)("button",{className:"filter-item"+(e.isActive?" active":""),onClick:function(){e.onClick(e.value)},children:e.value})}))),y=(n(35),function(e){var t=function(t){e.onFilterApply(e.filerType,t)},n=e.filterValues.map((function(n){return Object(h.jsx)(v,{value:n,isActive:n===e.activeItem,onClick:t},n)}));return Object(h.jsxs)("section",{className:"filter-category",children:[Object(h.jsx)("h3",{className:"filter-type",children:e.filterDisplayName}),Object(h.jsx)("div",{className:"filter-values",children:n})]})}),g=(n(36),function(e){var t=e.filterData.map((function(t){return Object(h.jsx)(y,{filterValues:t.data,filerType:t.type,filterDisplayName:t.displayName,activeItem:t.activeItem,onFilterApply:e.onFilterApply},t.type)}));return Object(h.jsxs)("div",{className:"launch-filters",children:[Object(h.jsx)("h2",{children:"Filters"}),t]})});n(37);var O=function(e){var t=Object(a.useRef)(null);return Object(a.useEffect)((function(){var n;return(n=new IntersectionObserver((function(a){a.forEach((function(a){a.isIntersecting&&(e.src&&(t.current.src=e.src),n=n.disconnect())}))}),{rootMargin:"0px 0px 500px 0px"})).observe(t.current),function(){n&&n.disconnect()}}),[e.src]),Object(h.jsx)("img",{alt:e.alt,ref:t})},x=(n(38),c.a.memo((function(e){return Object(h.jsx)("figure",{className:"figure-item",children:Object(h.jsx)(O,{src:e.source,alt:e.name})})}))),_=(n(39),c.a.memo((function(e){var t=Array.isArray(e.value),n=t?Object(h.jsx)("ul",{className:"detail-value",children:e.value.length?e.value.map((function(e){return Object(h.jsx)("li",{children:e},e)})):Object(h.jsx)("li",{children:"NA"})}):Object(h.jsx)("p",{className:"detail-value",children:e.value?e.value+"":"NA"});return Object(h.jsxs)("div",{className:"launch-detail"+(t?" type-list":""),children:[Object(h.jsxs)("p",{className:"detail-label",children:[e.label,":"]}),n]})}))),w=(n(40),c.a.forwardRef((function(e,t){return Object(h.jsxs)("div",{className:"launch-item",children:[Object(h.jsx)(x,{source:e.mission_patch_small,name:e.mission_name}),Object(h.jsxs)("p",{ref:t,className:"launch-name",children:[e.mission_name,"  #",e.flight_number]}),Object(h.jsx)(_,{value:e.mission_id,label:"Mission Ids"}),Object(h.jsx)(_,{value:e.launch_year,label:"Launch Year"}),Object(h.jsx)(_,{value:e.launch_success,label:"Successful Launch"}),Object(h.jsx)(_,{value:e.landing_success,label:"Successful Landing"})]})}))),D=(n(41),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={slicedIndex:12},e.lastElement=c.a.createRef(null),e.observer=null,e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.state.slicedIndex<this.props.launchData.length&&this.createIntersectionObserver()}},{key:"componentDidUpdate",value:function(){this.state.slicedIndex<this.props.launchData.length&&!this.observer?this.createIntersectionObserver():this.state.slicedIndex>=this.props.dataLimit&&this.props.launchData.length===this.props.dataLimit&&this.props.fetchMoreData()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"createIntersectionObserver",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){t.forEach((function(t){t.isIntersecting&&e.state.slicedIndex<e.props.launchData.length&&(e.lastElement=c.a.createRef(null),e.observer=e.observer.disconnect(),e.setState((function(e){return{slicedIndex:e.slicedIndex+12}})))}))}),{rootMargin:"0px 0px 1000px 0px"}),this.observer.observe(this.lastElement.current)}},{key:"render",value:function(){var e,t=this;return e=this.props.launchData&&this.props.launchData.length?this.props.launchData.slice(0,this.state.slicedIndex).map((function(e,n){return Object(h.jsx)(w,Object(b.a)({mission_patch_small:e.mission_patch_small,mission_name:e.mission_name,mission_id:e.mission_id,launch_year:e.launch_year,launch_success:e.launch_success,landing_success:e.landing_success,flight_number:e.flight_number},n===t.state.slicedIndex-1&&{ref:t.lastElement}),e.flight_number)})):Object(h.jsx)("div",{className:"no-data",children:Object(h.jsx)("h2",{children:"No data found"})}),Object(h.jsx)("div",{className:"launch-list",children:e})}}]),n}(c.a.Component)),N=(n(42),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(o.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(h.jsx)("div",{className:"error",children:Object(h.jsx)("h2",{children:"Something went wrong"})}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(c.a.Component)),A=(n(43),function(){return Object(h.jsx)("div",{className:"backdrop",children:Object(h.jsx)("div",{className:"loader"})})}),S=n(18),k="LAUNCH_DATA_FETCH_START",I="LAUNCH_DATA_FETCH_SUCCESS",L="LAUNCH_DATA_FETCH_ERROR";function E(e){var t=new URLSearchParams(e);return{launch_year:t.get("launch_year")||"",launch_success:t.get("launch_success")||"",land_success:t.get("land_success")||""}}function C(e){var t=e.launch_year,n=e.launch_success,a=e.land_success,c=new URLSearchParams;return t&&c.set("launch_year",t),n&&c.set("launch_success",n),a&&c.set("land_success",a),c.toString()}n(47);var q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={filterData:[{type:"launch_year",displayName:"Launch Year",data:new Array((new Date).getFullYear()-2005).fill().map((function(e,t){return 2006+t})),activeItem:e.props.query.launch_year&&parseInt(e.props.query.launch_year)},{type:"launch_success",displayName:"Successful Launch",data:["true","false"],activeItem:e.props.query.launch_success},{type:"land_success",displayName:"Successful Landing",data:["true","false"],activeItem:e.props.query.land_success}],queryString:C(e.props.query),dataLimit:50},e.fetchMoreData=function(){e.setState((function(e){return{dataLimit:e.dataLimit+50}}))},e.onFilterApply=function(t,n){var a=E(e.state.queryString),c=Object(b.a)({},e.state.filterData.find((function(e){return e.type===t})));c.activeItem&&c.activeItem===n?(a[t]=null,c.activeItem=null):(c.activeItem=n,a[t]=n);var r=C(a);e.props.history.push("?"+r),e.setState((function(e){return{filterData:e.filterData.map((function(e){return e.type===t?c:e})),queryString:r}}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchLaunchData("?limit=".concat(this.state.dataLimit).concat(this.state.queryString&&"&"+this.state.queryString))}},{key:"componentDidUpdate",value:function(e,t){t.queryString===this.state.queryString&&t.dataLimit===this.state.dataLimit||this.props.fetchLaunchData("?limit=".concat(this.state.dataLimit).concat(this.state.queryString&&"&"+this.state.queryString))}},{key:"render",value:function(){var e=Object(h.jsx)("div",{});return this.props.launchProgram.success?e=Object(h.jsx)(D,{launchData:this.props.launchProgram.launchData,dataLimit:this.state.dataLimit,fetchMoreData:this.fetchMoreData}):this.props.launchProgram.error&&(e=Object(h.jsx)("div",{className:"no-data",children:Object(h.jsx)("h2",{children:"Error occurred while fetching data"})})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(N,{children:Object(h.jsx)(g,{filterData:this.state.filterData,onFilterApply:this.onFilterApply})}),Object(h.jsxs)(N,{children:[e,this.props.launchProgram.loading&&Object(h.jsx)(A,{})]})]})}}]),n}(c.a.Component),F=Object(S.b)((function(e){return{launchProgram:e.launchProgram}}),{fetchLaunchData:function(e){return function(t){t({type:k}),fetch("https://api.spaceXdata.com/v3/launches"+e).then((function(e){return e.json()})).then((function(e){t(function(e){return{type:I,payload:e}}(e))})).catch((function(e){console.log("Error received",e),t({type:L})}))}}})(q);var R=function(e){return Object(h.jsx)(j,{children:Object(h.jsx)(F,{query:E(e.location.search),history:e.history})})},T=n(15),U=n(23),P={launchData:null,loading:!1,error:!1,success:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(b.a)(Object(b.a)({},e),{},{loading:!0,error:!1});case L:return{launchData:null,loading:!1,error:!0,success:!1};case I:return{launchData:t.payload.map((function(e){return{mission_patch_small:e.links.mission_patch_small,mission_name:e.mission_name,mission_id:e.mission_id,launch_year:e.launch_year,launch_success:e.launch_success+"",flight_number:e.flight_number,landing_success:e.rocket.first_stage.cores.some((function(e){return null===e.land_success}))?"NA":e.rocket.first_stage.cores.every((function(e){return e.land_success}))+""}})),loading:!1,error:!1,success:!0};default:return e}},W=Object(T.b)({launchProgram:M});var H=n(24),Y=n(3),B=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function J(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var V,K=Object(T.c)(W,V,Object(T.a)(U.a));s.a.hydrate(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(H.a,{children:Object(h.jsx)(S.a,{store:K,children:Object(h.jsx)(Y.a,{path:"/",component:R})})})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/space_x_launch_program",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/space_x_launch_program","/service-worker.js");B?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):J(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):J(t,e)}))}}()}},[[50,1,2]]]);